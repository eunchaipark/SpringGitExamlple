<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/include/header :: header}"></head> 
<body>
<div th:replace="~{/include/body-header :: bodyHeader}"></div>
<div class="container">
    <div class="pg-opt">
        <div class="row">
            <div class="col-md-6 pc">
                <h2 th:text="#{INSERT_USER_INFO}">INSERT USER INFO</h2>
                <span style="color:red" th:if="${message != null}" th:text="#{${message}}">message</span>
            </div>
            <div class="col-md-6">
                <ol class="breadcrumb">
                    <li th:text="#{MEMBER}">MEMBER</li>
                    <li class="active" th:text="#{INSERT_USER_INFO}">INSERT USER INFO</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="content">
        <form th:action="@{/member/insert}" method="post" id="joinForm" class="form-horizontal">
            <!-- CSRF 토큰 추가 - 이 한 줄만 추가하면 됩니다! -->
            <input type="hidden" name="csrfToken" th:value="${session.csrfToken}"/>
            
            <div class="form-group">
                <label class="control-label col-sm-2" for="userid" th:text="#{MEMBER_ID}">MEMBER ID</label>
                <div class="col-sm-4">
                    <input type="text" name="userid" id="userid" class="form-control" 
                           th:placeholder="#{MEMBER_ID}" required>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="password" th:text="#{MEMBER_PW}">MEMBER PASSWORD</label>
                <div class="col-sm-4">
                    <input type="password" name="password" id="password" class="form-control" 
                           pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}" 
                           th:placeholder="#{MEMBER_PW}" required>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="password2" th:text="#{MEMBER_PW_RE}">MEMBER PASSWORD RE</label>
                <div class="col-sm-4">
                    <input type="password" name="password2" id="password2" class="form-control" required>
                    <span id="passwordConfirm"></span>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="name" th:text="#{MEMBER_NAME}">MEMBER NAME</label>
                <div class="col-sm-4">
                    <input type="text" name="name" id="name" class="form-control" th:placeholder="#{MEMBER_NAME}" required>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="phone" th:text="#{MEMBER_PHONE}">MEMBER PHONE</label>
                <div class="col-sm-6">
                    <input type="text" name="phone" id="phone" class="form-control" th:placeholder="#{MEMBER_PHONE}" required>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="email" th:text="#{MEMBER_EMAIL}">MEMBER EMAIL</label>
                <div class="col-sm-8">
                    <input type="email" name="email" id="email" class="form-control" th:placeholder="#{MEMBER_EMAIL}" required>
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-8">
                    <input type="submit" class="btn btn-info" th:value="#{SAVE}">
                    <input type="reset" class="btn btn-info" th:value="#{CANCEL}">
                </div>
            </div>
        </form>
    </div>
</div>
<footer th:replace="~{/include/footer :: footer}"></footer> 

<script type="text/javascript">
    var pw1 = document.querySelector("#password");
    var pw2 = document.querySelector("#password2");
    var pwConfirm = document.querySelector("#passwordConfirm");
    pw2.onkeyup = function() {
        if(pw1.value !== pw2.value) {
            pwConfirm.innerText = "비밀번호가 일치하지 않습니다.";
            pwConfirm.style.color = "red";
        } else {
            pwConfirm.innerText = "";
        }
    }
</script>
</body>
</html>